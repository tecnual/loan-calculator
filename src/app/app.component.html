<!-- Toolbar -->
<div class="toolbar" role="banner">
  <div class="logo">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px" y="0px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">
      <path d="M4,62h6c1.1,0,2-0.9,2-2v-2h22.6c5,0,9.9-1.4,14.2-4.1c6.4-4,10.9-10.6,12.2-18.1l0.4-2.5c0.2-1.1-0.1-2.2-0.8-3.1
 c-0.7-0.9-1.8-1.3-2.9-1.3c-0.6,0-1.2,0.2-1.7,0.4V25h1c0.4,0,0.8-0.2,0.9-0.6c0.2-0.4,0.1-0.8-0.2-1.1l-8-8c-0.4-0.4-1-0.4-1.4,0
 L46,17.6V4c0-0.6-0.4-1-1-1H35c-0.6,0-1,0.4-1,1v11h-4.1c-0.8-1.7-1.3-2.7-1.8-3.2l2.5-6.2c0.3-0.7,0.1-1.4-0.4-1.9
 c-0.5-0.5-1.3-0.6-2-0.3l-1.9,0.9l-1.2-1.6c-0.3-0.4-0.8-0.7-1.3-0.7c-0.5,0-1,0.1-1.4,0.5l-1.5,1.5l-1-1.3
 c-0.3-0.4-0.8-0.7-1.3-0.7c-0.5,0-1,0.1-1.3,0.5l-1.9,1.9l-2.9-0.8c-0.7-0.2-1.4,0-1.8,0.6c-0.4,0.5-0.5,1.3-0.2,1.9l3,5.6
 C11.6,13.6,9,19,9,23.9V27c0,3.3,2.7,6,6,6h38.4l-2.1,4.2l-5.5,2.4C45.2,37.5,43.3,36,41,36H26.6c-5.2,0-10.2,1.4-14.6,4.1V38
 c0-1.1-0.9-2-2-2H4c-1.1,0-2,0.9-2,2v22C2,61.1,2.9,62,4,62z M15.2,6.4c0.6,0.2,1.3,0,1.7-0.4l1.8-1.8l1,1.3C20,5.9,20.5,6.2,21,6.2
 c0.5,0,1-0.1,1.3-0.5l1.5-1.5L25,5.7c0.5,0.7,1.4,0.9,2.2,0.5l1.5-0.7L26.3,11h-2.7l1.3-2.6l-1.8-0.9L21.4,11h-1.8l-1.4-2.9L16.4,9
 l1,2h-1.8l-2.8-5.2L15.2,6.4z M25,16v15H15c-2.2,0-4-1.8-4-4v-3.1c0-5.4,3.3-10.3,4.3-10.9h11.3c0.2,0.2,0.5,0.7,1.2,2H26
 C25.4,15,25,15.4,25,16z M27,17h7v14h-7V17z M49,17.4l5.6,5.6H43.4L49,17.4z M36,5h8v14.6l-3.7,3.7c-0.3,0.3-0.4,0.7-0.2,1.1
 c0.2,0.4,0.5,0.6,0.9,0.6h1v6h-6V5z M44,25h10v6h-2v-4c0-0.6-0.4-1-1-1h-4c-0.6,0-1,0.4-1,1v4h-2V25z M50,31h-2v-3h2V31z M26.6,38
 H41c1.7,0,3,1.3,3,3s-1.3,3-3,3H25v2h16c2.5,0,4.6-1.9,4.9-4.3l6.5-2.8c0.2-0.1,0.4-0.3,0.5-0.5l3.2-6.5c0.3-0.6,0.9-1,1.6-1
 c0.5,0,1,0.2,1.4,0.6s0.5,0.9,0.4,1.4L59,35.5c-1.2,6.9-5.3,13-11.3,16.7c-3.9,2.5-8.5,3.8-13.1,3.8H12V42.5
 C16.3,39.6,21.4,38,26.6,38z M4,38h6l0,22H4V38z" />
      <rect x="6" y="41" width="2" height="3" />
      <rect x="38" y="7" width="1" height="2" />
      <rect x="41" y="7" width="1" height="2" />
      <rect x="38" y="11" width="1" height="2" />
      <rect x="41" y="11" width="1" height="2" />
      <rect x="38" y="15" width="1" height="2" />
      <rect x="41" y="15" width="1" height="2" />
      <rect x="29" y="19" width="1" height="2" />
      <rect x="32" y="19" width="1" height="2" />
      <rect x="29" y="23" width="1" height="2" />
      <rect x="32" y="23" width="1" height="2" />
      <rect x="29" y="27" width="1" height="2" />
      <rect x="32" y="27" width="1" height="2" />
      <rect x="38" y="19" width="1" height="2" />
      <rect x="41" y="19" width="1" height="2" />
      <path d="M22,18h-1v-1h-2v1h-1c-0.6,0-1,0.4-1,1v3c0,0.6,0.4,1,1,1h3v1h-4v1c0,0.6,0.4,1,1,1h1v1h2v-1h1c0.6,0,1-0.4,1-1v-3
 c0-0.6-0.4-1-1-1h-3v-1h4v-1C23,18.4,22.6,18,22,18z" class="dolar" />
      <rect x="53" y="4" width="2" height="2" />
      <rect x="55" y="2" width="2" height="2" />
      <rect x="57" y="4" width="2" height="2" />
      <rect x="55" y="6" width="2" height="2" />
      <rect x="60" y="9" width="2" height="2" />
      <rect x="53" y="12" width="2" height="2" />
      <rect x="2" y="11" width="2" height="2" />
      <rect x="4" y="9" width="2" height="2" />
      <rect x="6" y="11" width="2" height="2" />
      <rect x="4" y="13" width="2" height="2" />
      <rect x="2" y="19" width="2" height="2" />
      <rect x="6" y="2" width="2" height="2" />
    </svg>
  </div>
  <span>Calculadora de préstamos</span>
  <div class="spacer"></div>
  <!--    <a aria-label="Angular on twitter" target="_blank" rel="noopener" href="https://twitter.com/angular" title="Twitter">
      <svg id="twitter-logo" height="24" data-name="Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400">
        <rect width="400" height="400" fill="none"/>
        <path d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23" fill="#fff"/>
      </svg>
    </a>
    <a aria-label="Angular on YouTube" target="_blank" rel="noopener" href="https://youtube.com/angular" title="YouTube">
      <svg id="youtube-logo" height="24" width="24" data-name="Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#fff">
        <path d="M0 0h24v24H0V0z" fill="none"/>
        <path d="M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"/>
      </svg>
    </a>
    -->
</div>

<div class="content" role="main">

  <div class="container">
    <form [formGroup]="form" (ngSubmit)="getAmortizationTable()">
      <mat-form-field appearance="standard" class="form-field">
        <mat-label>Importe del préstamo</mat-label>
        <input matInput inputmode="numeric" placeholder="€" formControlName="amount" #amountInput>
        <mat-icon matSuffix>euro_symbol</mat-icon>
        <mat-error *ngIf="form.controls['amount'].errors?.['required']">
          El importe del préstamo es un campo obligatorio.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-field">
        <mat-label>Tasa de interés anual:</mat-label>
        <input matInput type="text" formControlName="tax" placeholder="Tasa anual">
        <mat-icon [inline]="true" matSuffix>%</mat-icon>
        <mat-error *ngIf="form.controls['tax'].errors?.['required']">La tasa es un campo obligatorio</mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-field">
        <mat-label>Número de años:</mat-label>
        <input matInput type="number" formControlName="years" placeholder="Años">
        <mat-error *ngIf="form.controls['years'].errors?.['required']">El número de años es un campo obligatorio
        </mat-error>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill" class="form-field">
        <mat-label>Fecha de inicio</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="initialDate">
        <mat-datepicker-toggle matSuffix [for]="picker">
          <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
        </mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div mat-dialog-actions align="end">
        <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid">
          <mat-icon>list</mat-icon>
          Tabla de amortización
        </button>
      </div>
    </form>
  </div>

  <mat-card class="card-info">
    <div class="info">
      <span class="info__field">Número de pagos: {{ form.controls['years'].value * 12}}</span>
      <span class="info__field">Pago mensual: {{ getMonthlyPayment() | currency: 'EUR': 'symbol': '1.0-2'}}</span>
      <span class="info__field">Fecha de finalización: {{ getEndDate() | date: 'dd/MM/yyyy'}}</span>
    </div>
  </mat-card>
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 amortization-table" *ngIf="dataSource.length > 0">

    <!--- Note that these columns can be defined in any order.
            The actual rendered columns are set as a property on the row definition" -->

    <!-- Position Column
    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef> Mes </th>
      <td mat-cell *matCellDef="let element"> {{ element.position }} </td>
    </ng-container>
    -->
    <!-- payDate Column -->
    <ng-container matColumnDef="payDate">
      <th mat-header-cell *matHeaderCellDef> Fecha pago </th>
      <td mat-cell *matCellDef="let element"> {{element.payDate | date: 'dd/MM/yy'}} </td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="balance">
      <th mat-header-cell *matHeaderCellDef> Saldo </th>
      <td mat-cell *matCellDef="let element"> {{ element.balance | currency: 'EUR': 'symbol': '1.0-2'}} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="pay">
      <th mat-header-cell *matHeaderCellDef> Pago </th>
      <td mat-cell *matCellDef="let element"> {{ element.pay | currency: 'EUR': 'symbol': '1.0-2'}} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="interest">
      <th mat-header-cell *matHeaderCellDef> Intereses </th>
      <td mat-cell *matCellDef="let element"> {{ element.interest | currency: 'EUR': 'symbol': '1.0-2' }} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="principal">
      <th mat-header-cell *matHeaderCellDef> Amortización </th>
      <td mat-cell *matCellDef="let element"> {{ element.principal | currency: 'EUR': 'symbol': '1.0-2'}} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="endBalance">
      <th mat-header-cell *matHeaderCellDef> Saldo final </th>
      <td mat-cell *matCellDef="let element"> {{ element.endBalance | currency: 'EUR': 'symbol': '1.0-2'}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>


  <!-- Footer -->
  <footer>
    ¿Te gusta la calculadora de péstamos?&nbsp;
    <a href="https://github.com/tecnual/loan-calculator" target="_blank" rel="noopener"> Dale una estrella a nuestro
      repo.
      <div class="github-star-badge">
        <svg class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path d="M0 0h24v24H0z" fill="none" />
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
        </svg>
        Star
      </div>
    </a>
    <a href="https://github.com/angular/angular" target="_blank" rel="noopener">
      <svg class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="#1976d2" />
        <path d="M0 0h24v24H0z" fill="none" />
      </svg>
    </a>
  </footer>

  <svg id="clouds" xmlns="http://www.w3.org/2000/svg" width="2611.084" height="485.677" viewBox="0 0 2611.084 485.677">
    <title>Gray Clouds Background</title>
    <path id="Path_39" data-name="Path 39"
      d="M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z"
      transform="translate(142.69 -634.312)" fill="#eee" />
  </svg>

</div>


<router-outlet></router-outlet>
